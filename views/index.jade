extends layout

block content
  h1= title
  p Welcome to #{title}
  - if(session) {
  div
    img(src=session.user.photos[0].value)
  div= session.user.displayName
  - } else {
    a(href='/oauth') Twitterでログイン
  - }
  div.list
  - if(contributions) {
  - contributions.forEach(function(contribution) {
  div.contribution
    p= contribution.text
    img(src=contribution.base64)
  - })
  - }
  div(ng-app="myApp" ng-controller="myCtrl")
    p
      span(class="title") Queries:
      input(type='text' ng-model='query')
      input(type='button' ng-click='submit()' value='Search')
    p
      span(class='title') Results: {{ images.length }}
      ul(class='repos')
        li(ng-repeat='image in images')
          a(href='{{image}}' target=_blank) {{image}}
  form(method="POST", action="./contributes/post")
    input(type="text", name="text" value="テキスト")
    input(type="text", name="url" value="画像URL")
    input(type="submit", value="送信")
  script(type="text/javascript", src='bower_components/jquery/dist/jquery.js')
  script(type="text/javascript", src='bower_components/angular/angular.js')
  script(type="text/javascript", src='bower_components/threejs/build/three.js')
  script(type="text/javascript", src='bower_components/threejs/build/TrackballControls.js')
  script(type="text/javascript", src='javascripts/main.js')